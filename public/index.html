<!doctype html>
<html ng-app="clashRoyale">
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.2/angular.min.js"></script>
    <script src="https://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-1.2.5.js"></script>
    <link href="https://netdna.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <script src="app.js"></script>
  </head>
  <body ng-controller="mainCtrl">
      <header class="banner" role="banner">

        <div class="row">
           <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
             <img src="img/header.jpg" style="width:100%">
           </div>
        </div>

    </header>
      <nav class="navbar navbar-default">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">Clash Royale Chest Helper</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">

      </ul>


    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<uib-tabset active="activeJustified" justified="true">
  <uib-tab index="0" heading="Pattern Selection" ng-click="setActive(0)"></uib-tab>
  <uib-tab index="1" heading="Results ({{res.length}})" ng-click="setActive(1)"></uib-tab>
  <uib-tab index="2" heading="Informations" ng-click="setActive(2)"></uib-tab>
</uib-tabset>
<br>
<br>
<div ng-show="isActive(0)">
    <div class="panel panel-primary">
      <div class="panel-heading">Select chests</div>
          <div class="panel-body">
          <img ng-click="addChest('Silver')" src="img/Silver_Chest.png" style="height:100px"></img>
          <img ng-click="addChest('Gold')" src="img/Golden_Chest.png" style="height:100px"></img>
          <img ng-click="addChest('Magic')" src="img/Magical_Chest.png" style="height:100px"></img>
          <img ng-click="addChest('Unknown')" src="img/Unknown.png" style="height:100px"></img>
            </div>
      </div>
      <div class="panel panel-info">
          <div class="panel-heading">Chest pattern (Click on a chest to remove it)</div>
          <div class="panel-body">

         <span ng-repeat="chest in pattern track by $index">

            <img ng-show="chest == 'Magic'" src="img/Magical_Chest.png" ng-click="removeChest($index)" style="height:30px"></img>
            <img ng-show="chest == 'Gold'" src="img/Golden_Chest.png" ng-click="removeChest($index)" style="height:30px"></img>
            <img ng-show="chest == 'Silver'" src="img/Silver_Chest.png" ng-click="removeChest($index)" style="height:30px"></img>
            <img ng-show="chest == 'Unknown'" src="img/Unknown.png" ng-click="removeChest($index)" style="height:30px"></img>

        </span>
        </div>
      </div>

      <div class="container">
          <h4> Legend: </h4>
          <img src="img/Silver_Chest.png" style="height:30px"></img> - Silver chest <br>
          <img src="img/Golden_Chest.png" style="height:30px"></img> - Golden chest <br>
          <img src="img/Magical_Chest.png" style="height:30px"></img> - Magical chest <br>
          <img src="img/Unknown.png" style="height:30px"></img> - Unknown chest (if you don't remember one in the pattern) <br>
      </div>

    </div>
    <div>

    </div>
</div>

    <div ng-show="isActive(1)">
        <div class="panel panel-info">
            <div class="panel-heading">Chest pattern</div>
            <div class="panel-body">

           <span ng-repeat="chest in pattern track by $index">

              <!--{{$index+1+". "+chest}}-->
              <img ng-show="chest == 'Magic'" src="img/Magical_Chest.png" ng-click="removeChest($index)" style="height:30px"></img>
              <img ng-show="chest == 'Gold'" src="img/Golden_Chest.png" ng-click="removeChest($index)" style="height:30px"></img>
              <img ng-show="chest == 'Silver'" src="img/Silver_Chest.png" ng-click="removeChest($index)" style="height:30px"></img>
              <img ng-show="chest == 'Unknown'" src="img/Unknown.png" ng-click="removeChest($index)" style="height:30px"></img>

          </span>
          </div>
        </div>
      <h3>Minimum number of chest until Magical Chest :  <b>{{distMin}}</b></h3>
      <h3>Results ({{res.length}} possibilities)</h3>

      <div ng-repeat="r in res track by $index">
          <div class="panel panel-success">
              <div class="panel-heading">Occurency #{{$index}}</div>
              <div class="panel-body">
                  <p><b>Pattern: </b></p>
                <span ng-repeat="i in r track by $index">

                    <span class="badge">{{i[1]}}</span>
                    <img ng-show="i[2] == 'Silver'" src="img/Silver_Chest.png" style="height:30px"></img>
                    <img ng-show="i[2] == 'Gold'" src="img/Golden_Chest.png" style="height:30px"></img>
                    <img ng-show="i[2] == 'Magic'" src="img/Magical_Chest.png" style="height:30px"></img>
                    <hr ng-show="i[0] && !(r[$index+1][0])"><p ng-show="i[0] && !(r[$index+1][0])"><b>Possible nexts: </b></p>

                </span>
            </div>
        </div>
        </div>
    </div>


        <hr>
      </div>
    </div>

  </body>
</html>
